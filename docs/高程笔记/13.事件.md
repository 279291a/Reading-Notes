# 13.事件

## 13.1 事件流

**定义**：从页面中接受事件的顺序。`IE`的事件流是冒泡流，而`Netscape`是事件捕获流。

**事件冒泡**：由最具体的元素接收，逐渐向上传播到最不具体的元素。
**事件捕获**：不太具体的元素先接收到事件，而最具体的节点应该最后接收到事件。
**DOM 事件流**包括**三**个阶段，事件捕获阶段，处于目标阶段和事件冒泡阶段。

## 13.2 事件处理程序

### 概念

**事件**：用户或者浏览器自身执行的某种动作。
**事件处理程序**：响应某个事件的函数，也叫作**事件侦听器**。

### `HTML`事件处理程序

`HTML`事件处理程序，定义时可以包含具体要执行的代码，或者调用页面其他地方调用的脚本。这个函数内部，`this`值等于事件的目标元素。

```javascript
<button id="btn" click="alert('click')">
  click me
</button>
```

**缺点**：

1. 可能由于脚本引用顺序的时差而引发错误，例如事件处理程序中包含的函数还未载入。
2. 扩展事件处理程序的作用域链在不同浏览器中会导致不同的结果。
3. `html`与`javascript`紧密耦合，这也是摈弃`html`事件处理程序的原因。

### `DOM0`级事件处理程序

将函数赋值给一个事件处理程序。

```javascript
var btn = document.getElementById("btn");
btn.onclick = function() {
  alert("click");
};
```

**优点**：1.简单 2. 跨浏览器
**删除事件处理程序**：通过将其属性值设置为`null`

```javascript
btn.onclick = null;
```

### `DOM2`级事件处理程序

**方法：**用于处理指定和删除事件处理程序的操作：`addEventListener()`和`removeEventListener()`.

**参数：**处理时间名、事件处理程序的函数和 一个布尔值。为`true`是，表示在捕获阶段调用事件处理程序，如果为`false`,表示在冒泡阶段调用事件处理程序。

**优点**：添加多个事件处理程序。

**删除：**使用`removeEventListener()`来移除，在移除时传入的参数和添加事件处理程序使用的参数相同。通过`addEventListener()`添加的匿名函数无法移除。

**使用建议**： 最后一个参数传入 false ,也就是将事件处理程序添加到事件流的冒泡阶段，可以最大限度的兼容各种浏览器。

### IE 事件处理程序

1. **方法**: `addEvent()`和 `detachEvent()`，接收**参数**：事件处理程序名称和事件处理程序函数。事件会**被添加到事件流的冒泡阶段**。
2. **IE 中方法 与 dom 0 级方法的区别**：事件的作用域。在 **DOM 0 级**，事件处理程序会在所属元素的作用域内进行，在使用 `attachEvent()` 方法时，事件处理程序会在全局作用域中记性，因此`this` 等于 `window`
3. **优点**：可以为一个元素添加多个事件处理程序
4. **执行顺序**： 多个事件处理程序以添加顺序相反的顺序被触发。
5. **删除事件处理程序**：使用`detachEvent()`来移除，必须提供相同的参数，添加的匿名函数不能被移除。

## 13.2事件对象

触发`DOM`上的某个事件时，会产生一个事件对象`event`,这个对象包含着所有与事件相关的信息。不同浏览器对事件对象的支持方式不同。

### DOM 中的事件对象
